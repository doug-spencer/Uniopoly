<!doctype html>
<html lang="en">

<head>
  <title>Monops</title>
</head>

<body class="text-center">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>
    var socket;
      $(document).ready(function(){
          socket = io.connect('http://' + document.domain + ':' + location.port + '/lobby');
          socket.on('connect', function() {
              socket.emit('join', {});
          });
          //redirect if game starts
          socket.on('game started', function(data) {
              window.location.href = "http://" + document.domain + ":" + location.port + "/gameroom"
          });
          //update to players
          socket.on('player list', function(data) {
              $('#players').val('')
              //loop thro and add
          });
          //when the send message box is pressed
          $('#leave game').click(function(e) {
              socket.emit('leave lobby');
          });
      });
      //if a player leaves the room (WIP)
      function leave_room() {
          socket.emit('left', {}, function() {
              socket.disconnect();
              window.location.href = "{{ url_for('index') }}";
          });
      }
      //calls function every 2.5seconds
      setInterval(function() {
          socket.emit('check pregame status');
      }, 2500); 
  </script>

  <p>waiting room</p>
  <p>code:</p>
  <p>{{room_code}}</p>
  <p>players currently in game:</p>
  <p id="players">Loading...</p>
  <button id="leave room">Leave room</button>

</body>

</html>
